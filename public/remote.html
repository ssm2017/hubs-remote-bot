<!doctype html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<title>Hubs bot</title>
		<!-- custom css -->
		<link rel="stylesheet" href="style.css">
		<!-- send command -->
		<script type="text/javascript">
			function sendCommand(method, command, params="") {
				var xhttp = new XMLHttpRequest();
				xhttp.onreadystatechange = function () {
					if (this.readyState == 4 && this.status == 200) {
						// document.getElementById("response--raw").innerHTML = this.responseText;
						let json_response = JSON.parse(this.responseText);
						document.getElementById("response--command").innerHTML = json_response.command;
						document.getElementById("response--success").innerHTML = json_response.success;
						document.getElementById("response--message").innerHTML = json_response.message;
						document.getElementById("response--data").innerHTML = JSON.stringify(json_response.data);
					}
				};
				command = encodeURIComponent(command);
				xhttp.open(method, "http://localhost:7000/" + command+"?"+params, true);
				xhttp.send(null);
			}
		</script>
	</head>

	<body>
		<div id="response">
			<h2>Response</h2>
			<ul>
				<li>Command : <span id="response--command"></span></li>
				<li>Success : <span id="response--success"></span></li>
				<li>Message : <span id="response--message"></span></li>
				<li>Data : <span id="response--data"></span></li>
			</ul>
			<p id="response--raw"></p>
		</div>


		<div class="tab">
			<button class="tablink" onclick="openTab(event, 'start-stop')" id="defaultOpen">Start/Stop</button>
			<button class="tablink" onclick="openTab(event, 'dropping')">Dropping</button>
			<button class="tablink" onclick="openTab(event, 'move')">Move</button>
			<button class="tablink" onclick="openTab(event, 'others')">Others</button>
		  </div>
		  
		  <div style="margin-left:130px">

			<div id="start-stop" class="tabcontent">
				<ul>
					<!--<li><button onclick="sendCommand('start', 'bot_name=bot1&spawn_point=sp3')">Start bot</button></li>-->
					<li><button onclick="sendCommand('POST', '/api/bots')">Start bot</button></li>
					<li><button onclick="sendCommand('DELETE', '/api/bots')">Stop all bots</button></li>
					<li><button onclick="sendCommand('DELETE', '/api/bots/first')">Stop first bot</button></li>
					<li><button onclick="sendCommand('DELETE', '/api/bots/last')">Stop last bot</button></li>
					<li><button onclick="sendCommand('DELETE', '/api/bots/ee5fd130-37b6-41a1-a5fa-cdbd9ad4f265')">Stop bot uuid</button></li>
					<li><button onclick="sendCommand('GET', '/api/bots')">Get bots list</button></li>
				</ul>
			</div>
		  
			<div id="dropping" class="tabcontent">
				<ul>
					<li><button onclick="sendCommand('POST', 'spawn-object', 'url=https://upload.wikimedia.org/wikipedia/commons/6/6f/Helvellyn_Striding_Edge_360_Panorama%2C_Lake_District_-_June_09.jpg&projection=360-equirectangular&position=0+0+0&scale=80+20+80&dynamic=false')">Spawn image</button></li>
					<li><button onclick="sendCommand('POST', 'spawn-object', 'url=https://uploads-prod.reticulum.io/files/031dca7b-2bcb-45b6-b2df-2371e71aecb1.glb&dynamic=true')">Spawn object</button></li>
					<li><button onclick="sendCommand('POST', 'spawn-multiple-objects', 'dynamic=true&pause=1000')">Spawn multiple objects</button></li>
					<li><button onclick="sendCommand('POST', 'stop-spawn-multiple-objects')">Stop spawn multiple</button></li>
					<li><button onclick="sendCommand('DELETE', 'delete-all-objects')">Delete all objects</button></li>
				</ul>
			</div>
		  
			<div id="move" class="tabcontent">
				<ul>
					<li><button onclick="sendCommand('POST', 'jump-to', 'sp=sp1')">Jump to sp1</button></li>
					<li><button onclick="sendCommand('POST', 'jump-to', 'sp=sp2')">Jump to sp2</button></li>
					<li><button onclick="sendCommand('POST', 'jump-to', 'sp=sp3')">Jump to sp3</button></li>
					<li><button onclick="sendCommand('POST', 'goto', 'x=0&y=0&z=0')">Goto</button></li>
				</ul>
			</div>

			<div id="others" class="tabcontent">
				<ul>
					<li><button onclick="sendCommand('POST', 'say', 'message=ouais+gros+dddd&bot_uuid=last')">Say</button></li>
					<li><button onclick="sendCommand('POST', 'play-file', 'filename=bot-recording.mp3')">Speak</button></li>
					<li><button onclick="sendCommand('POST', 'play-file', 'filename=bot-recording.json')">Motions</button></li>
					<li><button onclick="sendCommand('POST', 'listen-to')">Listen to</button></li>
				</ul>
			  </div>
		  
		  </div>
		  
		  <script>
		  function openTab(evt, cityName) {
			var i, tabcontent, tablinks;
			tabcontent = document.getElementsByClassName("tabcontent");
			for (i = 0; i < tabcontent.length; i++) {
				tabcontent[i].style.display = "none";
			}
			tablinks = document.getElementsByClassName("tablink");
			for (i = 0; i < tablinks.length; i++) {
				tablinks[i].className = tablinks[i].className.replace(" active", "");
			}
			document.getElementById(cityName).style.display = "block";
			evt.currentTarget.className += " active";
		  }
		  document.getElementById("defaultOpen").click();
		  </script>
	</body>
</html>